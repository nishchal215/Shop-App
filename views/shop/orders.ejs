<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/orders.css">
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
        <main>
            <% if(orders.length > 0){ %>
                <ul>
                    <% orders.forEach(order =>{ %>
                        <li>
                            <h1># <%= order._id %> - <a href="/orders/<%= order._id %> ">Invoice</a> </h1>
                            <ul>
<!-- because of eager loading products array is passed in each order which contains details of included products-->
                                <% order.products.forEach(prod =>{ %>
<!-- product will have a orderItem key which will help access the quantity -->
                                    <li><%= prod.product.title %> (<%= prod.quantity %>)</li>
                                <% }) %>
                            </ul>
                        </li>
                    <% }) %>
                </ul>
            <% }else{ %>
                <h1>Nothing there!</h1>
            <% } %>
        </main>
        <%- include('../includes/end.ejs') %>